<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Image to Base64 Converter - Convert Images to Base64 | Multi-Tools</title>
    <meta name="description" content="Free online tool to convert images to Base64 encoded strings for web use. Easily embed images directly in your HTML, CSS, or JavaScript.">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    <link rel="stylesheet" href="../../css/style.css">
</head>
<body>
    <!-- Header will be loaded dynamically -->
    <div id="header-placeholder"></div>

    <main class="container py-4">
        <div class="tool-container">
            <div class="tool-header">
                <span class="category-badge">Image Tool</span>
                <h1><i class="fas fa-code me-2"></i>Image to Base64 Converter</h1>
                <p class="tool-description">Convert your images to Base64 encoded strings for web use. Base64 encoding allows you to embed images directly in your HTML, CSS, or JavaScript code.</p>
            </div>

            <!-- Ad Section - Top -->
            <div class="row mb-4">
                <div class="col-12">
                    <div class="card ad-container">
                        <div class="card-body text-center">
                            <p class="text-muted">Advertisement</p>
                            <!-- Ad code will go here -->
                        </div>
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-md-8 mx-auto">
                    <div class="mb-4 text-center">
                        <div class="upload-area p-5 mb-3 border rounded bg-light text-center">
                            <i class="fas fa-cloud-upload-alt fa-3x mb-3 text-primary"></i>
                            <h4>Drop your image here or click to browse</h4>
                            <p class="text-muted">Supports JPG, PNG, GIF, WebP, SVG, and more</p>
                            <input type="file" id="image-input" class="d-none" accept="image/*">
                            <button id="browse-btn" class="btn btn-primary mt-3">
                                <i class="fas fa-folder-open me-2"></i>Browse Files
                            </button>
                        </div>
                        <p class="text-muted small">Max file size: 5MB. Your files are secure and will not be stored on our servers.</p>
                    </div>
                    
                    <div id="image-preview" class="mb-4 d-none">
                        <h4 class="mb-3">Preview</h4>
                        <div class="text-center">
                            <img id="preview-img" class="img-fluid rounded border mb-3" alt="Image Preview">
                            <div class="d-flex justify-content-between">
                                <div>
                                    <p class="mb-1"><strong>File Name:</strong> <span id="file-name">-</span></p>
                                    <p class="mb-1"><strong>Original Size:</strong> <span id="file-size">-</span></p>
                                </div>
                                <div>
                                    <p class="mb-1"><strong>Dimensions:</strong> <span id="dimensions">-</span></p>
                                    <p class="mb-1"><strong>Format:</strong> <span id="format">-</span></p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div id="conversion-options" class="mb-4 d-none">
                        <h4 class="mb-3">Conversion Options</h4>
                        <div class="row">
                            <div class="col-md-6 mb-3">
                                <label for="output-format" class="form-label">Output Format</label>
                                <select id="output-format" class="form-select">
                                    <option value="data-url">Data URL (data:image/...)</option>
                                    <option value="base64-only">Base64 Only (without prefix)</option>
                                </select>
                            </div>
                            <div class="col-md-6 mb-3">
                                <label for="resize-option" class="form-label">Resize Image</label>
                                <select id="resize-option" class="form-select">
                                    <option value="original">Original Size</option>
                                    <option value="custom">Custom Size</option>
                                </select>
                            </div>
                        </div>
                        <div id="custom-size" class="row d-none">
                            <div class="col-md-6 mb-3">
                                <label for="width" class="form-label">Width (px)</label>
                                <input type="number" id="width" class="form-control" placeholder="Width">
                            </div>
                            <div class="col-md-6 mb-3">
                                <label for="height" class="form-label">Height (px)</label>
                                <input type="number" id="height" class="form-control" placeholder="Height">
                            </div>
                            <div class="col-12 mb-3">
                                <div class="form-check">
                                    <input class="form-check-input" type="checkbox" id="maintain-aspect-ratio" checked>
                                    <label class="form-check-label" for="maintain-aspect-ratio">
                                        Maintain aspect ratio
                                    </label>
                                </div>
                            </div>
                        </div>
                        <div class="text-center mt-4">
                            <button id="convert-btn" class="btn btn-primary btn-lg">
                                <i class="fas fa-code me-2"></i>Convert to Base64
                            </button>
                        </div>
                    </div>
                    
                    <div id="result-section" class="mb-4 d-none">
                        <h4 class="mb-3">Base64 Result</h4>
                        <div class="mb-3">
                            <label for="base64-output" class="form-label">Base64 String:</label>
                            <div class="position-relative">
                                <textarea id="base64-output" class="form-control" rows="6" readonly></textarea>
                                <button id="copy-btn" class="btn btn-sm btn-outline-primary position-absolute" style="top: 10px; right: 10px;">
                                    <i class="fas fa-copy"></i> Copy
                                </button>
                            </div>
                        </div>
                        <div class="mb-3">
                            <label class="form-label">Usage Examples:</label>
                            <div class="card mb-2">
                                <div class="card-header">HTML</div>
                                <div class="card-body">
                                    <pre class="mb-0"><code id="html-example">&lt;img src="<span class="text-primary">your-base64-string</span>" alt="Base64 Image"&gt;</code></pre>
                                </div>
                            </div>
                            <div class="card mb-2">
                                <div class="card-header">CSS</div>
                                <div class="card-body">
                                    <pre class="mb-0"><code id="css-example">.element {
    background-image: url(<span class="text-primary">your-base64-string</span>);
}</code></pre>
                                </div>
                            </div>
                        </div>
                        <div class="text-center mt-4">
                            <button id="convert-another-btn" class="btn btn-outline-primary">
                                <i class="fas fa-redo me-2"></i>Convert Another
                            </button>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Ad Section - Bottom -->
            <div class="row mt-5">
                <div class="col-12">
                    <div class="card ad-container">
                        <div class="card-body text-center">
                            <p class="text-muted">Advertisement</p>
                            <!-- Ad code will go here -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Footer will be loaded dynamically -->
    <div id="footer-placeholder"></div>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
    <script src="../../js/common.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Add this tool to recent
            addToRecent('image-to-base64', 'Image to Base64 Converter', 'image-tools', 'tools/image-tools/image-to-base64.html');
            
            const imageInput = document.getElementById('image-input');
            const browseBtn = document.getElementById('browse-btn');
            const uploadArea = document.querySelector('.upload-area');
            const imagePreview = document.getElementById('image-preview');
            const previewImg = document.getElementById('preview-img');
            const fileName = document.getElementById('file-name');
            const fileSize = document.getElementById('file-size');
            const dimensions = document.getElementById('dimensions');
            const format = document.getElementById('format');
            const conversionOptions = document.getElementById('conversion-options');
            const outputFormat = document.getElementById('output-format');
            const resizeOption = document.getElementById('resize-option');
            const customSize = document.getElementById('custom-size');
            const widthInput = document.getElementById('width');
            const heightInput = document.getElementById('height');
            const maintainAspectRatio = document.getElementById('maintain-aspect-ratio');
            const convertBtn = document.getElementById('convert-btn');
            const resultSection = document.getElementById('result-section');
            const base64Output = document.getElementById('base64-output');
            const copyBtn = document.getElementById('copy-btn');
            const htmlExample = document.getElementById('html-example');
            const cssExample = document.getElementById('css-example');
            const convertAnotherBtn = document.getElementById('convert-another-btn');
            
            let originalImage = null;
            let originalWidth = 0;
            let originalHeight = 0;
            let base64Result = '';
            
            // Browse button click
            browseBtn.addEventListener('click', function() {
                imageInput.click();
            });
            
            // File input change
            imageInput.addEventListener('change', function(e) {
                if (e.target.files.length > 0) {
                    handleImageUpload(e.target.files[0]);
                }
            });
            
            // Drag and drop functionality
            uploadArea.addEventListener('dragover', function(e) {
                e.preventDefault();
                uploadArea.classList.add('bg-light-hover');
            });
            
            uploadArea.addEventListener('dragleave', function() {
                uploadArea.classList.remove('bg-light-hover');
            });
            
            uploadArea.addEventListener('drop', function(e) {
                e.preventDefault();
                uploadArea.classList.remove('bg-light-hover');
                
                if (e.dataTransfer.files.length > 0) {
                    handleImageUpload(e.dataTransfer.files[0]);
                }
            });
            
            // Resize option change
            resizeOption.addEventListener('change', function() {
                if (this.value === 'custom') {
                    customSize.classList.remove('d-none');
                    widthInput.value = originalWidth;
                    heightInput.value = originalHeight;
                } else {
                    customSize.classList.add('d-none');
                }
            });
            
            // Width input change with aspect ratio
            widthInput.addEventListener('input', function() {
                if (maintainAspectRatio.checked && originalWidth > 0 && originalHeight > 0) {
                    const aspectRatio = originalWidth / originalHeight;
                    heightInput.value = Math.round(widthInput.value / aspectRatio);
                }
            });
            
            // Height input change with aspect ratio
            heightInput.addEventListener('input', function() {
                if (maintainAspectRatio.checked && originalWidth > 0 && originalHeight > 0) {
                    const aspectRatio = originalWidth / originalHeight;
                    widthInput.value = Math.round(heightInput.value * aspectRatio);
                }
            });
            
            // Convert button click
            convertBtn.addEventListener('click', function() {
                // In a real implementation, this would convert the image to base64
                // For this demo, we'll just use the preview image's src which is already base64
                let base64String = previewImg.src;
                
                // If base64-only format is selected, remove the data URL prefix
                if (outputFormat.value === 'base64-only') {
                    base64String = base64String.split(',')[1];
                }
                
                base64Result = base64String;
                base64Output.value = base64String;
                
                // Update examples
                updateExamples(base64String);
                
                // Show result section
                resultSection.classList.remove('d-none');
                
                // Scroll to result section
                resultSection.scrollIntoView({ behavior: 'smooth' });
            });
            
            // Copy button click
            copyBtn.addEventListener('click', function() {
                base64Output.select();
                document.execCommand('copy');
                showToast('Base64 string copied to clipboard!');
            });
            
            // Convert another button click
            convertAnotherBtn.addEventListener('click', function() {
                // Reset the form
                imageInput.value = '';
                imagePreview.classList.add('d-none');
                conversionOptions.classList.add('d-none');
                resultSection.classList.add('d-none');
                
                // Scroll to top
                window.scrollTo({ top: 0, behavior: 'smooth' });
            });
            
            // Function to handle image upload
            function handleImageUpload(file) {
                // Check file size (max 5MB)
                if (file.size > 5 * 1024 * 1024) {
                    showToast('File size exceeds 5MB limit!', 'error');
                    return;
                }
                
                // Check if file is an image
                if (!file.type.startsWith('image/')) {
                    showToast('Please upload an image file!', 'error');
                    return;
                }
                
                const reader = new FileReader();
                
                reader.onload = function(e) {
                    // Display image preview
                    previewImg.src = e.target.result;
                    
                    // Create an image object to get dimensions
                    const img = new Image();
                    img.onload = function() {
                        originalWidth = img.width;
                        originalHeight = img.height;
                        dimensions.textContent = `${originalWidth} Ã— ${originalHeight}`;
                    };
                    img.src = e.target.result;
                    
                    // Set file details
                    fileName.textContent = file.name;
                    fileSize.textContent = formatFileSize(file.size);
                    format.textContent = file.type.split('/')[1].toUpperCase();
                    
                    // Show preview and options
                    imagePreview.classList.remove('d-none');
                    conversionOptions.classList.remove('d-none');
                    
                    // Store original image for later use
                    originalImage = file;
                };
                
                reader.readAsDataURL(file);
            }
            
            // Function to update examples
            function updateExamples(base64String) {
                // Truncate base64 string for display
                const truncatedString = base64String.length > 30 
                    ? base64String.substring(0, 30) + '...' 
                    : base64String;
                
                // Update HTML example
                htmlExample.innerHTML = `&lt;img src="${truncatedString}" alt="Base64 Image"&gt;`;
                
                // Update CSS example
                cssExample.innerHTML = `.element {\n    background-image: url(${truncatedString});\n}`;
            }
            
            // Function to format file size
            function formatFileSize(bytes) {
                if (bytes === 0) return '0 Bytes';
                
                const k = 1024;
                const sizes = ['Bytes', 'KB', 'MB', 'GB'];
                const i = Math.floor(Math.log(bytes) / Math.log(k));
                
                return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
            }
        });
    </script>
</body>
</html> 